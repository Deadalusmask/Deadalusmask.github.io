<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" type="image/png" href="/favicon.png"/><meta name="theme-color" content="#000000"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><meta name="image" content="/favicon.png"/><title>Archlinux笔记(一) -Arthas.me</title><meta property="og:url" content="https://arthas.me/posts/Archlinux-note-1"/><meta property="og:type" content="article"/><meta property="og:title" content="Archlinux笔记(一)"/><meta property="og:image" content="/favicon.png"/><meta name="twitter:title" content="Archlinux笔记(一)"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/favicon.png"/><meta name="twitter:creator" content="@deadalusmask"/><meta name="next-head-count" content="15"/><link rel="preload" href="/_next/static/css/0a15d971913fef300597.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0a15d971913fef300597.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-67279fe62e81e3dbb4fe.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2113c6061a2f456066a1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.f771efd637e54964f7dc.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7787517220261cbe4aba.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-44fb0cf09ad137619ef8.js" as="script"/></head><body><div id="__next"><div class="page"><h3><a href="/">Arthas.me</a> / <a href="/posts">Posts</a> /</h3><h1>Archlinux笔记(一)</h1><span>2016.4.12</span><div class="md-content"><h3>制作启动盘</h3>
<p><a href="https://www.archlinux.org/download/">archlinux 镜像下载</a><br/>
制作工具推荐<a href="https://rufus.akeo.ie">Rufus</a><br/></p>
<h3>网络连接</h3>
<p>从启动盘启动后，先检查网络连接</p>
<p><code class="language-unknown"># wifi-menu</code></p>
<p>连接无线网络</p>
<h3>分区&#x26;格式化</h3>
<p><code class="language-unknown"># cfdisk</code></p>
<p><code class="language-unknown"># mkfs.ext4 /dev/sdxY</code></p>
<p>若是 UEFI 引导需要创建 EFI 系统分区并格式化为 FAT32 格式</p>
<p><code class="language-unknown"># mkfs.vfat -F32 /dev/sda1</code></p>
<p>格式化和启用交换分区</p>
<p><code class="language-unknown"># mkswap /dev/&#x26;lt;swap&#x26;gt;</code></p>
<p><code class="language-unknown"># swapon /dev/&#x26;lt;swap&#x26;gt;</code></p>
<h3>挂载</h3>
<p><code class="language-unknown"># mount /dev/sdxY /mnt</code></p>
<p>EFI 系统分区挂载到/boot</p>
<p><code class="language-unknown"># mkdir /mnt/boot</code></p>
<p><code class="language-unknown"># mount /dev/sda1 /mnt/boot</code></p>
<h3>选择镜像源</h3>
<p><code class="language-unknown"># nano /etc/pacman.d/mirrorlist</code></p>
<p>编辑 /etc/pacman.d/mirrorlist ，在文件的最顶端添加</p>
<p><code class="language-unknown">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</code></p>
<h3>安装基本系统</h3>
<p><code class="language-unknown"># pacman -Syy</code></p>
<p><code class="language-unknown"># pacstrap /mnt base base-devel</code></p>
<h3>配置 fstab</h3>
<p><code class="language-unknown"># genfstab -U /mnt &#x26;gt;&#x26;gt; /mnt/etc/fstab</code></p>
<p>检查是否正确生成</p>
<p><code class="language-unknown"># cat /mnt/etc/fstab</code></p>
<h3>chroot 到新系统</h3>
<p><code class="language-unknown"># arch-chroot /mnt /bin/bash</code></p>
<h3>基本配置</h3>
<p>设置主机名</p>
<p><code class="language-unknown"># echo &#x26;lt;computer_name&#x26;gt; &#x26;gt; /etc/hostname</code></p>
<p>设置 root 密码</p>
<p><code class="language-unknown"># passwd</code></p>
<p>设置时间</p>
<p><code class="language-unknown"># ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></p>
<p><code class="language-unknown"># hwclock --systohc --utc</code></p>
<p>设置语言</p>
<p><code class="language-unknown"># nano /etc/locale.gen</code></p>
<p>将<code class="language-unknown">en_US.UTF-8</code>和<code class="language-unknown">zh_CN.UTF-8</code>取消注释</p>
<p><code class="language-unknown"># locale-gen</code></p>
<p><code class="language-unknown"># echo LANG=en_US.UTF-8 &#x26;gt; /etc/locale.conf</code></p>
<p>安装中文字体</p>
<p><code class="language-unknown"># pacman -S wqy-zenhei</code></p>
<p>网络服务</p>
<p><code class="language-unknown"># systemctl enable dhcpcd.service</code></p>
<h3>安装引导程序</h3>
<p><code class="language-unknown"># pacman -S grub</code></p>
<p>UEFI 引导 <code class="language-unknown"># grub-install --target=x86_64-efi --efi-directory=/boot</code></p>
<p>MBR 引导 <code class="language-unknown"># grub-install --recheck /dev/sda</code></p>
<p>如果存在其他系统 需安装 os-prober</p>
<p><code class="language-unknown"># grub-mkconfig -o /boot/grub/grub.cfg</code></p>
<h3>卸载分区并重启</h3>
<p><code class="language-unknown"># exit</code></p>
<p><code class="language-unknown"># umount -R /mnt</code></p>
<p><code class="language-unknown"># reboot</code></p>
<p>参考:<a href="https://wiki.archlinux.org/index.php/Installation_guide">https://wiki.archlinux.org/index.php/Installation_guide</a></p></div><hr class="hr"/><div style="display:flex;justify-content:space-between"><a style="margin-right:24px" href="/posts/hello-world">Hello World</a><a href="/posts/Archlinux-note-3">Archlinux笔记(二)</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Archlinux笔记(一)","date":1460449950000,"slug":"Archlinux-note-1","content":"\u003ch3\u003e制作启动盘\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.archlinux.org/download/\"\u003earchlinux 镜像下载\u003c/a\u003e\u003cbr/\u003e\r\n制作工具推荐\u003ca href=\"https://rufus.akeo.ie\"\u003eRufus\u003c/a\u003e\u003cbr/\u003e\u003c/p\u003e\n\u003ch3\u003e网络连接\u003c/h3\u003e\n\u003cp\u003e从启动盘启动后，先检查网络连接\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# wifi-menu\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e连接无线网络\u003c/p\u003e\n\u003ch3\u003e分区\u0026#x26;格式化\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# cfdisk\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mkfs.ext4 /dev/sdxY\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e若是 UEFI 引导需要创建 EFI 系统分区并格式化为 FAT32 格式\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mkfs.vfat -F32 /dev/sda1\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e格式化和启用交换分区\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mkswap /dev/\u0026#x26;lt;swap\u0026#x26;gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# swapon /dev/\u0026#x26;lt;swap\u0026#x26;gt;\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e挂载\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mount /dev/sdxY /mnt\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eEFI 系统分区挂载到/boot\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mkdir /mnt/boot\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# mount /dev/sda1 /mnt/boot\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e选择镜像源\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# nano /etc/pacman.d/mirrorlist\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e编辑 /etc/pacman.d/mirrorlist ，在文件的最顶端添加\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003eServer = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e安装基本系统\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# pacman -Syy\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# pacstrap /mnt base base-devel\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e配置 fstab\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# genfstab -U /mnt \u0026#x26;gt;\u0026#x26;gt; /mnt/etc/fstab\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e检查是否正确生成\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# cat /mnt/etc/fstab\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003echroot 到新系统\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# arch-chroot /mnt /bin/bash\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e基本配置\u003c/h3\u003e\n\u003cp\u003e设置主机名\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# echo \u0026#x26;lt;computer_name\u0026#x26;gt; \u0026#x26;gt; /etc/hostname\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e设置 root 密码\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# passwd\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e设置时间\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# hwclock --systohc --utc\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e设置语言\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# nano /etc/locale.gen\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e将\u003ccode class=\"language-unknown\"\u003een_US.UTF-8\u003c/code\u003e和\u003ccode class=\"language-unknown\"\u003ezh_CN.UTF-8\u003c/code\u003e取消注释\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# locale-gen\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# echo LANG=en_US.UTF-8 \u0026#x26;gt; /etc/locale.conf\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e安装中文字体\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# pacman -S wqy-zenhei\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e网络服务\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# systemctl enable dhcpcd.service\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e安装引导程序\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# pacman -S grub\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eUEFI 引导 \u003ccode class=\"language-unknown\"\u003e# grub-install --target=x86_64-efi --efi-directory=/boot\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eMBR 引导 \u003ccode class=\"language-unknown\"\u003e# grub-install --recheck /dev/sda\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e如果存在其他系统 需安装 os-prober\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# grub-mkconfig -o /boot/grub/grub.cfg\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003e卸载分区并重启\u003c/h3\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# exit\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# umount -R /mnt\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode class=\"language-unknown\"\u003e# reboot\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e参考:\u003ca href=\"https://wiki.archlinux.org/index.php/Installation_guide\"\u003ehttps://wiki.archlinux.org/index.php/Installation_guide\u003c/a\u003e\u003c/p\u003e"},"prev":{"slug":"hello-world","title":"Hello World","date":1452799465000},"next":{"slug":"Archlinux-note-3","title":"Archlinux笔记(二)","date":1460485490000}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"Archlinux-note-1"},"buildId":"1EFwxkPp7d779ZeTLfDNk","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-a98cee78eb8282e29fb6.js"></script><script src="/_next/static/chunks/main-67279fe62e81e3dbb4fe.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.2113c6061a2f456066a1.js" async=""></script><script src="/_next/static/chunks/commons.f771efd637e54964f7dc.js" async=""></script><script src="/_next/static/chunks/pages/_app-7787517220261cbe4aba.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-44fb0cf09ad137619ef8.js" async=""></script><script src="/_next/static/1EFwxkPp7d779ZeTLfDNk/_buildManifest.js" async=""></script><script src="/_next/static/1EFwxkPp7d779ZeTLfDNk/_ssgManifest.js" async=""></script></body></html>