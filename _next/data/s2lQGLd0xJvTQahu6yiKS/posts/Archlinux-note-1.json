{"pageProps":{"post":{"title":"Archlinux笔记(一)","date":1460449950000,"slug":"Archlinux-note-1","content":"<h3>制作启动盘</h3>\n<p><a href=\"https://www.archlinux.org/download/\">archlinux 镜像下载</a><br/>\r\n制作工具推荐<a href=\"https://rufus.akeo.ie\">Rufus</a><br/></p>\n<h3>网络连接</h3>\n<p>从启动盘启动后，先检查网络连接</p>\n<p><code># wifi-menu</code></p>\n<p>连接无线网络</p>\n<h3>分区&#x26;格式化</h3>\n<p><code># cfdisk</code></p>\n<p><code># mkfs.ext4 /dev/sdxY</code></p>\n<p>若是 UEFI 引导需要创建 EFI 系统分区并格式化为 FAT32 格式</p>\n<p><code># mkfs.vfat -F32 /dev/sda1</code></p>\n<p>格式化和启用交换分区</p>\n<p><code># mkswap /dev/&#x3C;swap></code></p>\n<p><code># swapon /dev/&#x3C;swap></code></p>\n<h3>挂载</h3>\n<p><code># mount /dev/sdxY /mnt</code></p>\n<p>EFI 系统分区挂载到/boot</p>\n<p><code># mkdir /mnt/boot</code></p>\n<p><code># mount /dev/sda1 /mnt/boot</code></p>\n<h3>选择镜像源</h3>\n<p><code># nano /etc/pacman.d/mirrorlist</code></p>\n<p>编辑 /etc/pacman.d/mirrorlist ，在文件的最顶端添加</p>\n<p><code>Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</code></p>\n<h3>安装基本系统</h3>\n<p><code># pacman -Syy</code></p>\n<p><code># pacstrap /mnt base base-devel</code></p>\n<h3>配置 fstab</h3>\n<p><code># genfstab -U /mnt >> /mnt/etc/fstab</code></p>\n<p>检查是否正确生成</p>\n<p><code># cat /mnt/etc/fstab</code></p>\n<h3>chroot 到新系统</h3>\n<p><code># arch-chroot /mnt /bin/bash</code></p>\n<h3>基本配置</h3>\n<p>设置主机名</p>\n<p><code># echo &#x3C;computer_name> > /etc/hostname</code></p>\n<p>设置 root 密码</p>\n<p><code># passwd</code></p>\n<p>设置时间</p>\n<p><code># ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></p>\n<p><code># hwclock --systohc --utc</code></p>\n<p>设置语言</p>\n<p><code># nano /etc/locale.gen</code></p>\n<p>将<code>en_US.UTF-8</code>和<code>zh_CN.UTF-8</code>取消注释</p>\n<p><code># locale-gen</code></p>\n<p><code># echo LANG=en_US.UTF-8 > /etc/locale.conf</code></p>\n<p>安装中文字体</p>\n<p><code># pacman -S wqy-zenhei</code></p>\n<p>网络服务</p>\n<p><code># systemctl enable dhcpcd.service</code></p>\n<h3>安装引导程序</h3>\n<p><code># pacman -S grub</code></p>\n<p>UEFI 引导 <code># grub-install --target=x86_64-efi --efi-directory=/boot</code></p>\n<p>MBR 引导 <code># grub-install --recheck /dev/sda</code></p>\n<p>如果存在其他系统 需安装 os-prober</p>\n<p><code># grub-mkconfig -o /boot/grub/grub.cfg</code></p>\n<h3>卸载分区并重启</h3>\n<p><code># exit</code></p>\n<p><code># umount -R /mnt</code></p>\n<p><code># reboot</code></p>\n<p>参考:<a href=\"https://wiki.archlinux.org/index.php/Installation_guide\">https://wiki.archlinux.org/index.php/Installation_guide</a></p>"},"prev":{"slug":"recover","title":"恢复","date":1459427394000},"next":{"slug":"Archlinux-note-3","title":"Archlinux笔记(二)","date":1460485490000}},"__N_SSG":true}