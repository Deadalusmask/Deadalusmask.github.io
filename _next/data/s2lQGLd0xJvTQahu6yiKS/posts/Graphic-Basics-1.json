{"pageProps":{"post":{"title":"Graphic Basics 1 3D模型文件","date":1524772918000,"slug":"Graphic-Basics-1","content":"<h2>3D 模型文件</h2>\n<h3>obj 格式</h3>\n<p>在 Blender 中以默认参数创建一个立方体，并直接将其导出为 OBJ 文件，其内容如下：</p>\n<p><em>cube.obj</em></p>\n<pre><code># Blender v2.79 (sub 0) OBJ File: ''\r\n# www.blender.org\r\nmtllib Cube.mtl\r\no Cube\r\nv -1.000000 -1.000000 1.000000\r\nv -1.000000 1.000000 1.000000\r\nv -1.000000 -1.000000 -1.000000\r\nv -1.000000 1.000000 -1.000000\r\nv 1.000000 -1.000000 1.000000\r\nv 1.000000 1.000000 1.000000\r\nv 1.000000 -1.000000 -1.000000\r\nv 1.000000 1.000000 -1.000000\r\nvn -1.0000 0.0000 0.0000\r\nvn 0.0000 0.0000 -1.0000\r\nvn 1.0000 0.0000 0.0000\r\nvn 0.0000 0.0000 1.0000\r\nvn 0.0000 -1.0000 0.0000\r\nvn 0.0000 1.0000 0.0000\r\nusemtl None\r\ns off\r\nf 1//1 2//1 4//1 3//1\r\nf 3//2 4//2 8//2 7//2\r\nf 7//3 8//3 6//3 5//3\r\nf 5//4 6//4 2//4 1//4\r\nf 3//5 7//5 5//5 1//5\r\nf 8//6 4//6 2//6 6//6\n</code></pre>\n<p>其中 <code>v</code> 开头的行为几何体顶点(Geometric vertices)数据，即这个立方体有 8 个顶点，其坐标的 x,y,z 值分别为每行对应的三个浮点数。</p>\n<p>以 <code>vn</code> 开头的行为定点法线(Vertex normals)数据，三个浮点数表示其法线在 x,y,z 三个方向上的向量。</p>\n<p><code>usemtl</code> 指定了在这一行之后的元素使用的材质名称，这个名称定义在 mtl 文件中。</p>\n<p><code>s off</code> 表示关闭平滑着色(Smooth shading disabled)</p>\n<p><code>f</code> 表示一个面元素(Face Element),其后的数据格式为 <code>v/vt/vn</code> ，即顶点索引、顶点材质索引和顶点法线索引，vt 和 vn 都可以省略。以第一行面元素为例，其由 4 个顶点按顺序组成，其索引分别为 1，2，4，3，法线索引都为 1，即法线方向都为(-1,0,0)</p>\n<p>在上面的立方体文件中，因为 Blender 中创建立方体默认没有 uv 贴图坐标，所以没有以 <code>vt</code> 开始的行，在面元素描述时用 <code>v//vn</code> 省略。</p>\n<p>维基百科：\r\n<a href=\"https://en.wikipedia.org/wiki/Wavefront_.obj_file\">Wavefront .obj file</a></p>\n<h3>Three.js' ASCII JSON format.</h3>\n<p>使用 Three.js 提供的 Blender 插件<a href=\"https://github.com/mrdoob/three.js/tree/dev/utils/exporters/blender\">io_three</a>可以从 Blender 中导出用于 Three.js 的 json 格式文件。</p>\n<p>导出一个默认的立方体如下：</p>\n<p><em>Cube.json</em></p>\n<pre><code class=\"hljs language-json\">{\r\n    <span class=\"hljs-attr\">\"vertices\"</span>:[<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-1</span>],\r\n    <span class=\"hljs-attr\">\"uvs\"</span>:[],\r\n    <span class=\"hljs-attr\">\"metadata\"</span>:{\r\n        <span class=\"hljs-attr\">\"generator\"</span>:<span class=\"hljs-string\">\"io_three\"</span>,\r\n        <span class=\"hljs-attr\">\"uvs\"</span>:<span class=\"hljs-number\">0</span>,\r\n        <span class=\"hljs-attr\">\"type\"</span>:<span class=\"hljs-string\">\"Geometry\"</span>,\r\n        <span class=\"hljs-attr\">\"vertices\"</span>:<span class=\"hljs-number\">8</span>,\r\n        <span class=\"hljs-attr\">\"version\"</span>:<span class=\"hljs-number\">3</span>,\r\n        <span class=\"hljs-attr\">\"normals\"</span>:<span class=\"hljs-number\">6</span>,\r\n        <span class=\"hljs-attr\">\"faces\"</span>:<span class=\"hljs-number\">6</span>\r\n    },\r\n    <span class=\"hljs-attr\">\"normals\"</span>:[<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">-2.98023e-08</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2.98023e-08</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">-1</span>,<span class=\"hljs-number\">2.98023e-08</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">-2.98023e-08</span>],\r\n    <span class=\"hljs-attr\">\"faces\"</span>:[<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">7</span>,<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">7</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">6</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">33</span>,<span class=\"hljs-number\">7</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">5</span>,<span class=\"hljs-number\">5</span>]\r\n}</code></pre>\n<p>可以看出，其中<code>metadata</code>用来保存一些元信息，<code>vertices</code>,<code>uvs</code>,<code>normals</code>和<code>faces</code>分别用一个一维数组来储存所有的数据。</p>\n<p><code>faces</code>中的<code>33</code>表示接下来是一个 4 个顶点的面，其后的 5 个元素中，前 4 个表示顶点的索引，第 5 个表示法线的索引。</p>"},"prev":{"slug":"weibo-friend-circle","title":"新浪微博用户好友圈","date":1523552581000},"next":{"slug":"Graphic-Basics-2","title":"Graphic Basics 2 变换与坐标系统","date":1524859455000}},"__N_SSG":true}